<?php

use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| This file is where you may define all of the routes that are handled
| by your application. Just tell Laravel the URIs it should respond
| to using a Closure or controller method. Build something great!
|
*/

/**
 *==========================================================================
 *==========================================================================
 *------------------------      ROTAS LOGIN      ---------------------------
 *==========================================================================
 *==========================================================================
 */

Route::get('/admin/login', 'AdminController@login');
Route::post('/admin/login', 'AdminController@postLogin');

/**
 *==========================================================================
 *==========================================================================
 *-------------------------      ROTAS ADMIN     ---------------------------
 *==========================================================================
 *==========================================================================
 */

Route::group(['middleware'=>'auth:admin'],function(){

	Route::get('/admin', 'AdminController@index');

	/**
	 *==========================================================================
	 *==========================================================================
	 *-----------------------      ROTAS LOGOUT       --------------------------
	 *==========================================================================
	 *==========================================================================
	 */

	Route::get('/admin/logout','AdminController@logout');
	
	/**
	 *==========================================================================
	 *==========================================================================
	 *----------------------      ROTAS CONSULTA       -------------------------
	 *==========================================================================
	 *==========================================================================
	 */

	Route::get('/admin/consulta/usuarios', 
		['uses'=>'AdminController@listaUsuario','as'=>'consulta.usuario.index']);

	Route::post('/admin/consulta/usuarios', 'AdminController@adminSearch')
		->name('admin.seach');

	Route::resource('admin', 'AdminController');

	Route::get('/admin/consulta/usuarios/{id}', 'AdminController@show')
		->name('admin');

	/**
	 *==========================================================================
	 *==========================================================================
	 *------------------------      ROTAS PERFIL       -------------------------
	 *==========================================================================
	 *==========================================================================
	 */

	Route::get('/admin/perfil', 
		['uses'=>'AdminController@Adminperfil','as'=>'Adminperfil.index']);

	Route::post('/admin/perfil', 
		['uses'=>'AdminController@AdminAtualizaperfil','as'=>'Adminperfil.index']);

});